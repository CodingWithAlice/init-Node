<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>蚂蚁笔试题</title>
</head>
<body>
    <div>
        
    </div>
    <script>
        //  🌹1.数组去重 - 存在字符串（至少三种方法）
        //  [2, '2', 3, 4, 5, 5]
        function unque(callback, delay) {
           // 哈希 - new Map 存储key
           // 遍历+判断 indexOf 是否一致
           // new Set
        }
        
        // 🌹2.事件系统 - 网易有相似的题
        // on、off、once（执行一次后不再执行）、filter（过滤事件）
        class Events {
            constructor(){
                this.obj = {}
            }
            on(eventName, handler) {
                if(!this.obj[eventName]){
                    this.obj[eventName] = [handler];
                }else {
                    this.obj[eventName].push(handler);
                }
            }

            off(eventName, handler) {
                if(!this.obj[eventName]){
                    console.error('not exist.');
                }else {
                    this.obj[eventName] = null;
                }
            }

            trigger(eventName, args) {
                if(!this.obj[eventName]){
                    console.error('not exist.');
                }else {
                    // 运用打印1到10的问题
                    for(let i=0; i<this.obj[eventName].length; i++) {
                        this.obj[eventName][i](args);
                    }
                }
            }
        }
        



        // 🌹3.简单实现洋葱模型，让输入可以按序输出
        // 1, 2, 3, mid, 1 end, 2 end, 3 end 
        async function fun1() {
            console.log('1');
            await next();
            console.log('1 end');
        }

        async function fun2() {
            console.log('2');
            await next();
            console.log('2 end');
        }
        
        async function fun3() {
            console.log('3');
            await next();
            console.log('3 end');
        }

        function fun4() {
            console.log('mid')
            new Promise((resolve) => {
                console.log('4');
                resolve();
            }).then(function() {
                console.log('5');
            })
        }


        
    </script>
</body>
</html>